---
// ETF UNSA - Generic Tabs Component
// Author: Ernedin Zajko <ezajko@root.ba>

interface Tab {
  id: string;
  label: string;
  active?: boolean;
}

interface Props {
  id: string; // Unique ID for the tab group
  tabs: Tab[];
  class?: string;
  pills?: boolean; // Style as pills instead of tabs
  vertical?: boolean; // Style as vertical tabs
}

const { id, tabs, class: className, pills = false, vertical = false } = Astro.props;

// Determine which tab is active (default to first if none specified)
const activeTabId = tabs.find((t) => t.active)?.id || tabs[0]?.id;

// Base classes
const containerClass = `tabs ${vertical ? 'tabs-vertical' : 'tabs-horizontal'} ${className || ''}`;
const headerClass = `tab-header ${pills ? 'nav-pills' : ''}`;
const contentClass = `tab-content`;
const footerClass = `tab-footer`;
---

<div class={containerClass} id={id}>
  <!-- Tab Header (Navigation) -->
  <div class={headerClass} role="tablist" aria-orientation={vertical ? 'vertical' : 'horizontal'}>
    {
      tabs.map((tab) => (
        <button
          class={`nav-link ${tab.id === activeTabId ? 'active' : ''}`}
          id={`${tab.id}-tab`}
          data-bs-toggle={pills ? 'pill' : 'tab'}
          data-bs-target={`#${tab.id}`}
          type="button"
          role="tab"
          aria-controls={tab.id}
          aria-selected={tab.id === activeTabId}
        >
          {tab.label}
        </button>
      ))
    }
  </div>

  <!-- Tab Content -->
  <div class={contentClass}>
    <slot />
  </div>

  <!-- Optional Tab Footer (hidden by default unless used via named slot in future) -->
  <div class={footerClass} style="display: none;"></div>
</div>
