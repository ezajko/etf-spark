// ETF UNSA - Bootstrap Overrides
// Author: Ernedin Zajko <ezajko@root.ba>
// License: GPL-2.0-or-later

// Override Bootstrap CSS variables to match our design system
:root {
    // Default Theme Color (Blue)
    --site-theme-color: #{$site-theme-brand-blue};
    --site-theme-color-rgb: #{red($site-theme-brand-blue)},
    #{green($site-theme-brand-blue)},
    #{blue($site-theme-brand-blue)};

    // Primary Color mapped to Theme Color
    --bs-primary: var(--site-theme-color);
    --bs-primary-rgb: var(--site-theme-color-rgb);

    // High Contrast Enforcement (Global)
    [data-site-theme="high-contrast"] & {

        // Force links and primary text to follow theme color
        a,
        .text-primary,
        .btn-link {
            color: var(--site-theme-color) !important;
        }
    }

    // Disable Rounded Corners
    --bs-border-radius: 0;
    --bs-border-radius-sm: 0;
    --bs-border-radius-lg: 0;
    --bs-border-radius-xl: 0;
    --bs-border-radius-2xl: 0;
    --bs-border-radius-pill: 0;

    // Secondary Color
    --bs-secondary: #{$site-theme-color-secondary};
    --bs-secondary-rgb: #{$site-theme-color-secondary-rgb};

    // Success Color
    --bs-success: #{$site-theme-status-success};
    --bs-success-rgb: #{red($site-theme-status-success)},
    #{green($site-theme-status-success)},
    #{blue($site-theme-status-success)};

    // Danger Color
    --bs-danger: #{$site-theme-status-danger};
    --bs-danger-rgb: #{red($site-theme-status-danger)},
    #{green($site-theme-status-danger)},
    #{blue($site-theme-status-danger)};

    // Warning Color
    --bs-warning: #{$site-theme-status-warning};
    --bs-warning-rgb: #{red($site-theme-status-warning)},
    #{green($site-theme-status-warning)},
    #{blue($site-theme-status-warning)};

    // Info Color
    --bs-info: #{$site-theme-status-info};
    --bs-info-rgb: #{red($site-theme-status-info)},
    #{green($site-theme-status-info)},
    #{blue($site-theme-status-info)};

    // Body Colors
    --bs-body-color: #{$site-theme-text-body};
    --bs-body-bg: #{$site-theme-bg-body};

    // Font Family
    --bs-font-sans-serif: #{$site-theme-font-family-sans};
    --bs-font-serif: #{$site-theme-font-family-serif};
    --bs-font-monospace: #{$site-theme-font-family-mono};
    --bs-body-font-family: #{$site-theme-font-family-base};
}

// Dynamic Theme Overrides
[data-site-theme="teal"] {
    --site-theme-color: #{$site-theme-brand-teal};
    --site-theme-color-rgb: #{red($site-theme-brand-teal)},
    #{green($site-theme-brand-teal)},
    #{blue($site-theme-brand-teal)};
    --bs-secondary: #{$site-theme-teal-secondary};
    --bs-secondary-rgb: #{red($site-theme-teal-secondary)},
    #{green($site-theme-teal-secondary)},
    #{blue($site-theme-teal-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-teal-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-teal-text-dark)},
        #{green($site-theme-brand-teal-text-dark)},
        #{blue($site-theme-brand-teal-text-dark)};
    }
}

[data-site-theme="green"] {
    --site-theme-color: #{$site-theme-brand-green};
    --site-theme-color-rgb: #{red($site-theme-brand-green)},
    #{green($site-theme-brand-green)},
    #{blue($site-theme-brand-green)};
    --bs-secondary: #{$site-theme-green-secondary};
    --bs-secondary-rgb: #{red($site-theme-green-secondary)},
    #{green($site-theme-green-secondary)},
    #{blue($site-theme-green-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-green-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-green-text-dark)},
        #{green($site-theme-brand-green-text-dark)},
        #{blue($site-theme-brand-green-text-dark)};
    }
}

[data-site-theme="purple"] {
    --site-theme-color: #{$site-theme-brand-purple};
    --site-theme-color-rgb: #{red($site-theme-brand-purple)},
    #{green($site-theme-brand-purple)},
    #{blue($site-theme-brand-purple)};
    --bs-secondary: #{$site-theme-purple-secondary};
    --bs-secondary-rgb: #{red($site-theme-purple-secondary)},
    #{green($site-theme-purple-secondary)},
    #{blue($site-theme-purple-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-purple-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-purple-text-dark)},
        #{green($site-theme-brand-purple-text-dark)},
        #{blue($site-theme-brand-purple-text-dark)};
    }
}

[data-site-theme="orange"] {
    --site-theme-color: #{$site-theme-brand-orange};
    --site-theme-color-rgb: #{red($site-theme-brand-orange)},
    #{green($site-theme-brand-orange)},
    #{blue($site-theme-brand-orange)};
    --bs-secondary: #{$site-theme-orange-secondary};
    --bs-secondary-rgb: #{red($site-theme-orange-secondary)},
    #{green($site-theme-orange-secondary)},
    #{blue($site-theme-orange-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-orange-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-orange-text-dark)},
        #{green($site-theme-brand-orange-text-dark)},
        #{blue($site-theme-brand-orange-text-dark)};
    }
}

[data-site-theme="red"] {
    --site-theme-color: #{$site-theme-brand-red};
    --site-theme-color-rgb: #{red($site-theme-brand-red)},
    #{green($site-theme-brand-red)},
    #{blue($site-theme-brand-red)};
    --bs-secondary: #{$site-theme-red-secondary};
    --bs-secondary-rgb: #{red($site-theme-red-secondary)},
    #{green($site-theme-red-secondary)},
    #{blue($site-theme-red-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-red-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-red-text-dark)},
        #{green($site-theme-brand-red-text-dark)},
        #{blue($site-theme-brand-red-text-dark)};
    }
}

[data-site-theme="blue"] {
    --site-theme-color: #{$site-theme-brand-blue};
    --site-theme-color-rgb: #{red($site-theme-brand-blue)},
    #{green($site-theme-brand-blue)},
    #{blue($site-theme-brand-blue)};
    --bs-secondary: #{$site-theme-blue-secondary};
    --bs-secondary-rgb: #{red($site-theme-blue-secondary)},
    #{green($site-theme-blue-secondary)},
    #{blue($site-theme-blue-secondary)};

    &[data-bs-theme="dark"] {
        --site-theme-color: #{$site-theme-brand-blue-text-dark};
        --site-theme-color-rgb: #{red($site-theme-brand-blue-text-dark)},
        #{green($site-theme-brand-blue-text-dark)},
        #{blue($site-theme-brand-blue-text-dark)};
    }
}

[data-site-theme="high-contrast"] {
    // High Contrast Yellow/Black
    $ez-hc-yellow: #FFD700;
    $ez-hc-black: #000000;

    --site-theme-color: #{$ez-hc-black};
    --site-theme-color-rgb: 0, 0, 0;

    --bs-secondary: #000000;
    --bs-secondary-rgb: 0, 0, 0;

    // Force high contrast borders
    --bs-border-width: 2px;
    --bs-border-color: #000000;

    // Enforce link underlining for WCAG compliance
    a {
        text-decoration: underline !important;
        text-decoration-thickness: 2px !important;
    }

    // In Dark Mode, switch to Yellow on Black
    &[data-bs-theme="dark"] {
        --site-theme-color: #{$ez-hc-yellow};
        --site-theme-color-rgb: 255, 215, 0;
        --bs-secondary: #{$ez-hc-yellow};

        --bs-body-color: #{$ez-hc-yellow};
        --bs-body-bg: #000000;
        --bs-border-color: #{$ez-hc-yellow};

        --bs-link-color: #{$ez-hc-yellow};
        --bs-link-hover-color: #FFFFFF;

        a {
            color: #{$ez-hc-yellow} !important;

            &:hover,
            &:focus {
                color: #FFFFFF !important;
                background-color: #000000 !important;
            }
        }

        .text-muted {
            color: #{$ez-hc-yellow} !important;
        }
    }

    // In Light Mode (explicit override for full contrast)
    &[data-bs-theme="light"] {
        a {
            color: #000000 !important;
            font-weight: 700;

            &:hover,
            &:focus {
                background-color: #FFFF00 !important; // Yellow bg highlight on hover
            }
        }
    }
}

// Dark Mode Overrides
[data-bs-theme="dark"] {
    --bs-body-color: #{$site-theme-text-dark};
    --bs-body-bg: #{$site-theme-bg-dark};
    --bs-border-color: #{$site-theme-border-dark};
    --bs-border-color-translucent: rgba(255, 255, 255, 0.15);

    // Override Primary interactions for better contrast in dark mode if needed
    // For now, keeping brand blue as it's accessible on dark bg

    // Utilities overrides
    .text-muted {
        color: #{$site-theme-text-muted-dark} !important;
    }

    .bg-light {
        background-color: #{$site-theme-bg-dark-secondary} !important;
        color: #{$site-theme-text-dark} !important;
    }

    .btn-close {
        filter: invert(1) grayscale(100%) brightness(200%);
    }

    // Accessible Link Color for Dark Mode (Lighter Blue)
    --bs-link-color: #{$site-theme-brand-blue-text-dark};
    --bs-link-hover-color: #{lighten($site-theme-brand-blue-text-dark, 10%)}; // Even lighter on hover

    // Card Footer Background in Dark Mode
    --bs-tertiary-bg: #{$site-theme-bg-dark-secondary};
}

// Override Button Colors (because Bootstrap uses hardcoded hex in compiled CSS)
.btn-primary {
    --bs-btn-bg: var(--site-theme-color);
    --bs-btn-border-color: var(--site-theme-color);
    --bs-btn-hover-bg: var(--site-theme-color); // Using same color for now, relying on filter or opacity if needed, or define dark var
    --bs-btn-hover-border-color: var(--site-theme-color);
    --bs-btn-active-bg: var(--site-theme-color);
    --bs-btn-active-border-color: var(--site-theme-color);
    --bs-btn-disabled-bg: var(--site-theme-color);
    --bs-btn-disabled-border-color: var(--site-theme-color);

    // To darken on hover without JS, we might need --site-theme-color-dark
    &:hover {
        filter: brightness(90%);
    }
}

.btn-secondary {
    --bs-btn-bg: var(--bs-secondary);
    --bs-btn-border-color: var(--bs-secondary);
    --bs-btn-hover-bg: var(--bs-secondary);
    --bs-btn-hover-border-color: var(--bs-secondary);
    --bs-btn-active-bg: var(--bs-secondary);
    --bs-btn-active-border-color: var(--bs-secondary);
    --bs-btn-disabled-bg: var(--bs-secondary);
    --bs-btn-disabled-border-color: var(--bs-secondary);

    &:hover {
        filter: brightness(90%);
    }
}

.btn-outline-primary {
    --bs-btn-color: var(--site-theme-color);
    --bs-btn-border-color: var(--site-theme-color);
    --bs-btn-hover-bg: var(--site-theme-color);
    --bs-btn-hover-border-color: var(--site-theme-color);
    --bs-btn-active-bg: var(--site-theme-color);
    --bs-btn-active-border-color: var(--site-theme-color);
}

// Override Text Colors
.text-primary {
    color: var(--site-theme-color) !important;
}

.text-secondary {
    color: #{$site-theme-color-secondary} !important;
}

// Override Background Colors
.bg-primary {
    background-color: var(--site-theme-color) !important;
}

.bg-secondary {
    background-color: #{$site-theme-color-secondary} !important;
}